<template>
  <div class="min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4 pb-24">
    <ProfileHeader
        :name="profileData.name"
        :description="profileData.description"
        @edit-profile="handleEditProfile"
    />
    <LevelSection
        :current-level="levelData.currentLevel"
        :level-title="levelData.levelTitle"
        :total-exp="levelData.totalExp"
        :current-exp="levelData.currentExp"
        :next-level-exp="levelData.nextLevelExp"
        :exp-percentage="levelData.expPercentage"
    />
    <AchievementSection
        :achievements="displayedAchievements"
        :show-all="showAllAchievements"
        @toggle-show-all="toggleAchievements"
    />
    <ScoreGuide />
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import ProfileHeader from '@/components/profile/ProfileHeader.vue'
import LevelSection from '@/components/profile/LevelSection.vue'
import AchievementSection from '@/components/profile/AchievementSection.vue'
import ScoreGuide from '@/components/profile/ScoreGuide.vue'

// TODO: ì´ ë°ì´í„°ë“¤ì€ APIì—ì„œ ë°›ì•„ì˜¬ ì˜ˆì •
const profileData = ref({
  name: 'ê°“ìƒëŸ¬',
  description: 'ë§¤ì¼ ì„±ìž¥í•˜ëŠ” ì¤‘ ðŸŒ±'
})

const levelData = ref({
  currentLevel: 5,
  levelTitle: 'ê°“ìƒ ì‹¤ì²œê°€',
  totalExp: 142,
  currentExp: 22,
  nextLevelExp: 80,
  expPercentage: 27.5
})

const achievements = ref([
  // ìƒ˜í”Œ ë°ì´í„° - APIë¡œ êµì²´ë  ì˜ˆì •
])

// UI ìƒíƒœ
const showAllAchievements = ref(false)

const displayedAchievements = computed(() => {
  return showAllAchievements.value ? achievements.value : achievements.value.slice(0, 3)
})

// ë©”ì„œë“œ
const handleEditProfile = () => {
  // TODO: í”„ë¡œí•„ ìˆ˜ì • ëª¨ë‹¬ ë˜ëŠ” íŽ˜ì´ì§€ë¡œ ì´ë™
  console.log('í”„ë¡œí•„ ìˆ˜ì • ìš”ì²­')
}

const toggleAchievements = () => {
  showAllAchievements.value = !showAllAchievements.value
}
</script>